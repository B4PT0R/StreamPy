<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
<input id="#KEY#" style="width: 100% ;box-sizing: border-box; padding: 10px; border-radius: 6px; background-color: #262730; color: white; border: 1px solid #5ace8b; outline: none">
<script>
var socket = io.connect('http://localhost:5000');

// Function to set the input as disabled
function setInputDisabled() {
    var input = document.getElementById('#KEY#');
    input.value=localStorage.getItem('messageSent_#KEY#')
    input.disabled = true;
    input.style.backgroundColor = "#262730";
    input.style.color = "grey";
    input.style.border="none";
}

// Check if user has already sent a message
if (localStorage.getItem('messageSent_#KEY#') !== null) {
    setInputDisabled();
}

document.getElementById("#KEY#").addEventListener("keyup", function(event) {
    if (event.keyCode === 13) {
        sendMessage();
    }
});

function sendMessage() {
    var input = document.getElementById('#KEY#');
    socket.emit('message', input.value);
    localStorage.setItem('messageSent_#KEY#', input.value);
    // Set input as disabled
    setInputDisabled();
    // Save to localStorage that user has sent a message
    
}
</script>